From: =?utf-8?q?Guido_G=C3=BCnther?= <agx@sigxcpu.org>
Date: Sun, 28 Sep 2014 12:46:41 +0200
Subject: Move GConf values to GSettings

This makes sure we don't lose already configured connections.

Closes: #740047
---
 data/org.virt-manager.virt-manager.convert | 29 +++++++++++++++++++++++++++++
 setup.py                                   |  2 ++
 2 files changed, 31 insertions(+)
 create mode 100644 data/org.virt-manager.virt-manager.convert

diff --git a/data/org.virt-manager.virt-manager.convert b/data/org.virt-manager.virt-manager.convert
new file mode 100644
index 0000000..72e07e2
--- /dev/null
+++ b/data/org.virt-manager.virt-manager.convert
@@ -0,0 +1,29 @@
+[org.virt-manager.virt-manager]
+system-tray = /apps/virt-manager/system-tray
+
+[org.virt-manager.virt-manager.connections]
+autostart = /apps/virt-manager/connections/autostart
+uris = /apps/virt-manager/connections/uris
+
+[org.virt-manager.virt-manager.details]
+show-toolbar = /apps/virt-manager/details/show-toolbar
+
+[org.virt-manager.virt-manager.paths]
+image-default = /apps/virt-manager/paths/default-image-path
+media-default = /apps/virt-manager/paths/default-media-path
+
+[org.virt-manager.virt-manager.stats]
+enable-net-poll    = /apps/virt-manager/stats/enable-net-poll
+enable-disk-poll   = /apps/virt-manager/stats/enable-disk-poll
+enable-memory-poll = /apps/virt-manager/stats/enable-mem-poll
+enable-cpu-poll    = /apps/virt-manager/stats/enable-cpu-poll
+
+[org.virt-manager.virt-manager.vmlist-fields]
+cpu-usage       = /apps/virt-manager/vmlist-fields/cpu_usage
+disk-usage      = /apps/virt-manager/vmlist-fields/disk_usage
+host-cpu-usage  = /apps/virt-manager/vmlist-fields/host_cpu_usage
+memory-usage    = /apps/virt-manager/vmlist-fields/memory_usage
+network-traffic = /apps/virt-manager/vmlist-fields/network_traffic
+
+
+
diff --git a/setup.py b/setup.py
index 388bdf8..1f6f24c 100755
--- a/setup.py
+++ b/setup.py
@@ -607,6 +607,8 @@ setup(
         ]),
         ("share/glib-2.0/schemas",
          ["data/org.virt-manager.virt-manager.gschema.xml"]),
+        ("share/GConf/gsettings",
+         ["data/org.virt-manager.virt-manager.convert"]),
         ("share/virt-manager/ui", glob.glob("ui/*.ui")),
 
         ("share/man/man1", [
