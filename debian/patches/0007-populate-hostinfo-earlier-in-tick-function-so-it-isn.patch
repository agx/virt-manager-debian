From e5f355eb86dd34840f4de5c9e9fff6455790ad9c Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
Date: Tue, 7 Oct 2008 08:49:58 +0200
Subject: [PATCH] populate hostinfo earlier in tick function so it isn't accessed uninitialized.

HG changeset patch
User "Cole Robinson <crobinso@redhat.com>"
Date Mon Oct 06 13:21:06 2008 -0400
Node ID 270e1697b81ac143df54e111e2e1bed5006ad49c
parent: 9f5d5b6940c5a266f7b3a087f41face4713feec2
---
 src/virtManager/connection.py |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/virtManager/connection.py b/src/virtManager/connection.py
index 6e240e7..77b1ef5 100644
--- a/src/virtManager/connection.py
+++ b/src/virtManager/connection.py
@@ -866,6 +866,8 @@ class vmmConnection(gobject.GObject):
         if self.state != self.STATE_ACTIVE:
             return
 
+        self.hostinfo = self.vmm.getInfo()
+
         # Poll for new virtual network objects
         (startNets, stopNets, newNets,
          oldNets, self.nets) = self._update_nets()
@@ -908,10 +910,6 @@ class vmmConnection(gobject.GObject):
 
         # Finally, we sample each domain
         now = time()
-        try:
-            self.hostinfo = self.vmm.getInfo()
-        except:
-            logging.warn("Unable to get host information")
 
         updateVMs = self.vms
         if noStatsUpdate:
-- 
1.6.0.1

