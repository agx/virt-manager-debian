From: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date: Fri, 13 Feb 2009 14:56:01 +0100
Subject: [PATCH] hint to ssh-askpass

if ssh authentication fails

Closes: #513599
---
 src/virtManager/connection.py |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/src/virtManager/connection.py b/src/virtManager/connection.py
index 011dd4c..1440f08 100644
--- a/src/virtManager/connection.py
+++ b/src/virtManager/connection.py
@@ -431,13 +431,19 @@ class vmmConnection(gobject.GObject):
         else:
             self.state = self.STATE_DISCONNECTED
 
+            if self.uri.find("+ssh://") > 0:
+                  hint = "\nMaybe you need to install ssh-askpass " + \
+                         "in order to authenticate."
+            else:
+                  hint = ""
+
             (_type, value, stacktrace) = open_error
             # Detailed error message, in English so it can be Googled.
             self.connectError = \
                     ("Unable to open connection to hypervisor URI '%s':\n" %
                      str(self.uri)) + \
                     str(_type) + " " + str(value) + "\n" + \
-                    traceback.format_exc (stacktrace)
+                    traceback.format_exc (stacktrace) + hint
             logging.error(self.connectError)
 
         # We want to kill off this thread asap, so schedule a gobject
-- 
